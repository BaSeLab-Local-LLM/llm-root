163.239.27.193.nip.io {
    log {
        output stdout
        format console
    }
    route {
        # Public HTTPS endpoint for Vercel external rewrite
        reverse_proxy backend:8000 {
            # Do not forward identifying upstream response headers when present
            header_down -Server
            header_down -Via
            header_down -X-Powered-By
            header_down -Ngrk-Agent-Ips
        }
        header {
            # Best-effort masking of proxy/product fingerprints
            -Server
            -Via
            -X-Powered-By
            -Ngrk-Agent-Ips
        }
    }
}

:80 {
    log {
        output stdout
        format console
    }
    route {
        # Fallback HTTP endpoint (direct IP testing)
        reverse_proxy backend:8000 {
            # Do not forward identifying upstream response headers when present
            header_down -Server
            header_down -Via
            header_down -X-Powered-By
            header_down -Ngrk-Agent-Ips
        }
        header {
            # Best-effort masking of proxy/product fingerprints
            -Server
            -Via
            -X-Powered-By
            -Ngrk-Agent-Ips
        }
    }
}
